<h1>hello world</h1>
    <button id="GOGOGO" onclick="GOGOGO()">FETCH</button>
    <p>Ime:</p>
    <input type="text" name="" id="ime">
    <p>Adresa:</p>
    <input type="text" name="" id="adresa">
    <p>Pun naziv firme:</p>
    <input type="text" name="" id="pun">
    <p>Poslovno ime firme:</p>
    <input type="text" name="" id="poslovno">
    <section class="section-registracije">
        <div class="naslov-registracije">
            <p>Registracije: </p>
        </div>
        <div class="unos-registracije">
            <input class='input-registracije' type="text" name="" id="registracije0" data-broj-registracije="0">

        </div>
    </section>
    <script>
        const glupiTrigger = {
            0: false,
        };
        document.getElementById('registracije0').addEventListener('input', (e) => prviInput(e))
        function prviInput(e) {
            if (!glupiTrigger[`${e.srcElement.dataset.brojRegistracije}`]) {
                generisiNoviInput(e.srcElement.dataset.brojRegistracije + 1);
                glupiTrigger[`${e.srcElement.dataset.brojRegistracije}`] = true;
            }
        };
        function generisiNoviInput(n) {
            glupiTrigger[`${n}`] = false;

            const newInput = document.createElement('input');
            newInput.type = 'text';
            newInput.id = `registracije${n}`;
            newInput.dataset.brojRegistracije = `${n}`;
            newInput.addEventListener('input', (e) => prviInput(e));
            newInput.classList.add('input-registracije');
            document.body.querySelector('.unos-registracije').appendChild(newInput);
        }
        async function GOGOGO() {
            fetch('word', {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({ 
                    "obrazac": "kretanja" ,
                    "ime": document.body.querySelector("#ime").value ?? "GRESKA",
                    "adresa": document.body.querySelector("#adresa").value ?? "GRESKA",
                    "preduzetnik": false,
                    "punNaziv": document.body.querySelector("#pun").value ?? "GRESKA",
                    "poslovnoIme": document.body.querySelector("#poslovno").value ?? "GRESKA",
                    "registracije": [...document.querySelectorAll('.input-registracije')].filter(input => input.value).map(input => input.value),
                }),
            }).then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.blob(); // Use response.blob() to interpret as binary data
                })
                .then(blob => {
                    // Create a temporary URL for the Blob
                    const url = URL.createObjectURL(blob);

                    // Create a link element
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = 'document.docx'; // Set the filename here

                    // Append the link to the document body
                    document.body.appendChild(link);

                    // Click the link to initiate the download
                    link.click();

                    // Clean up: remove the link and revoke the URL
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                })
                .catch(error => {
                    console.error('Error fetching file:', error);
                });

        }
    </script>